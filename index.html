<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CRC Co Arles Macif - Intranet Moderne</title>
    <link rel="stylesheet" href="frontend/css/ios-modern.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <meta name="description" content="Intranet moderne du CRC Co Arles Macif avec design iOS">
    <meta name="theme-color" content="#007AFF">
</head>
<body>
    <!-- Arri√®re-plan anim√© moderne -->
    <div class="background-container">
        <div class="background-gradient"></div>
        <div class="floating-shapes">
            <div class="shape shape-1"></div>
            <div class="shape shape-2"></div>
            <div class="shape shape-3"></div>
            <div class="shape shape-4"></div>
        </div>
    </div>

    <!-- Navigation iOS moderne -->
    <nav class="main-nav" id="mainNav">
        <div class="nav-container">
            <div class="nav-brand">
                <img src="assets/logo-macif.png" alt="Macif" class="nav-logo">
                <h2>CRC Co Arles</h2>
            </div>
        <span style="font-size: 32px;">üè¢</span>
<h2>CRC Co Arles</h2>
            <div class="nav-menu" id="navMenu">
                <a href="#home" class="nav-link active" data-section="home">
                    <i class="fas fa-house"></i>
                    <span>Accueil</span>
                </a>
                <a href="#trombinoscope" class="nav-link" data-section="trombinoscope">
                    <i class="fas fa-users"></i>
                    <span>√âquipe</span>
                </a>
                <a href="#agenda" class="nav-link" data-section="agenda">
                    <i class="fas fa-calendar-days"></i>
                    <span>Agenda</span>
                </a>
                <a href="#anniversaires" class="nav-link" data-section="anniversaires">
                    <i class="fas fa-cake-candles"></i>
                    <span>Anniversaires</span>
                </a>
            </div>

            <div class="nav-user">
                <div class="user-info" id="userInfo">
                    <span class="user-name">Connexion</span>
                    <i class="fas fa-user-circle"></i>
                </div>
                <button class="logout-btn" id="logoutBtn" style="display: none;">
                    <i class="fas fa-arrow-right-from-bracket"></i>
                </button>
            </div>

            <button class="nav-toggle" id="navToggle">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </nav>

    <!-- Contenu principal -->
    <main class="main-content">
        <!-- Section Accueil -->
        <section id="home" class="content-section active">
            <div class="section-container">
                <div class="welcome-header">
                    <h1>Bienvenue sur l'intranet moderne du CRC Co Arles Macif</h1>
                    <p>Votre espace collaboratif nouvelle g√©n√©ration pour rester connect√© avec votre √©quipe</p>
                </div>

                <div class="dashboard-grid">
                    <div class="dashboard-card">
                        <div class="card-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="card-content">
                            <h3>Collaborateurs</h3>
                            <p class="card-number" id="totalEmployees">-</p>
                            <span class="card-label">Actifs</span>
                        </div>
                    </div>

                    <div class="dashboard-card">
                        <div class="card-icon">
                            <i class="fas fa-calendar-check"></i>
                        </div>
                        <div class="card-content">
                            <h3>√âv√©nements</h3>
                            <p class="card-number" id="upcomingEvents">-</p>
                            <span class="card-label">√Ä venir</span>
                        </div>
                    </div>

                    <div class="dashboard-card">
                        <div class="card-icon">
                            <i class="fas fa-cake-candles"></i>
                        </div>
                        <div class="card-content">
                            <h3>Anniversaires</h3>
                            <p class="card-number" id="monthlyBirthdays">-</p>
                            <span class="card-label">Ce mois-ci</span>
                        </div>
                    </div>

                    <div class="dashboard-card">
                        <div class="card-icon">
                            <i class="fas fa-building-user"></i>
                        </div>
                        <div class="card-content">
                            <h3>√âquipes</h3>
                            <p class="card-number" id="totalTeams">-</p>
                            <span class="card-label">Actives</span>
                        </div>
                    </div>
                </div>

                <div class="recent-activity">
                    <div class="activity-card">
                        <h3>Prochains √©v√©nements</h3>
                        <div class="activity-list" id="recentEvents">
                            <div class="loading-spinner">Chargement des √©v√©nements...</div>
                        </div>
                    </div>

                    <div class="activity-card">
                        <h3>Anniversaires du mois</h3>
                        <div class="activity-list" id="recentBirthdays">
                            <div class="loading-spinner">Chargement des anniversaires...</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section Trombinoscope -->
        <section id="trombinoscope" class="content-section">
            <div class="section-container">
                <div class="section-header">
                    <div>
                        <h2>Notre √âquipe</h2>
                        <p class="section-subtitle">D√©couvrez les talents du CRC Co Arles Macif</p>
                    </div>
                    <div class="section-actions">
                        <div class="search-box">
                            <i class="fas fa-magnifying-glass"></i>
                            <input type="text" id="employeeSearch" placeholder="Rechercher un collaborateur...">
                        </div>
                        <select id="teamFilter" class="team-filter">
                            <option value="">Toutes les √©quipes</option>
                        </select>
                        <button class="btn btn-primary" id="addEmployeeBtn" style="display: none;">
                            <i class="fas fa-user-plus"></i>
                            Ajouter
                        </button>
                    </div>
                </div>

                <div class="team-structure" id="teamStructure">
                    <div class="loading-spinner">Chargement de l'√©quipe...</div>
                </div>
            </div>
        </section>

        <!-- Section Agenda -->
        <section id="agenda" class="content-section">
            <div class="section-container">
                <div class="section-header">
                    <div>
                        <h2>Agenda Partag√©</h2>
                        <p class="section-subtitle">Planifiez et organisez vos √©v√©nements d'√©quipe</p>
                    </div>
                    <div class="section-actions">
                        <select id="eventTypeFilter" class="event-filter">
                            <option value="">Tous les √©v√©nements</option>
                            <option value="reunion">R√©unions</option>
                            <option value="formation">Formations</option>
                            <option value="evenement">√âv√©nements</option>
                            <option value="conge">Cong√©s</option>
                        </select>
                        <button class="btn btn-primary" id="addEventBtn">
                            <i class="fas fa-calendar-plus"></i>
                            Nouvel √©v√©nement
                        </button>
                    </div>
                </div>

                <div class="calendar-container ios-card">
                    <div class="calendar-header">
                        <button id="prevMonth" class="btn btn-secondary">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <h3 id="currentMonth">Novembre 2024</h3>
                        <button id="nextMonth" class="btn btn-secondary">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>

                    <div class="calendar-grid" id="calendarGrid">
                        <div class="loading-spinner">Chargement du calendrier...</div>
                    </div>
                </div>

                <div class="events-list ios-card">
                    <h3>√âv√©nements √† venir</h3>
                    <div class="events-container" id="eventsList">
                        <div class="loading-spinner">Chargement des √©v√©nements...</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section Anniversaires -->
        <section id="anniversaires" class="content-section">
            <div class="section-container">
                <div class="section-header">
                    <div>
                        <h2>Anniversaires</h2>
                        <p class="section-subtitle">C√©l√©brons ensemble nos collaborateurs ce mois-ci</p>
                    </div>
                </div>

                <div class="birthdays-container" id="birthdaysContainer">
                    <div class="loading-spinner">Chargement des anniversaires...</div>
                </div>
            </div>
        </section>
    </main>

    <!-- Modal de connexion moderne -->
    <div class="modal" id="loginModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Connexion S√©curis√©e</h3>
                <button class="modal-close" id="closeLoginModal">
                    <i class="fas fa-xmark"></i>
                </button>
            </div>
            <form id="loginForm" class="login-form">
                <div class="form-group">
                    <label for="username">Adresse email</label>
                    <input type="email" id="username" name="username" placeholder="votre.email@macif.fr" required>
                </div>
                <div class="form-group">
                    <label for="password">Mot de passe</label>
                    <input type="password" id="password" name="password" placeholder="Votre mot de passe" required>
                </div>
                <button type="submit" class="btn btn-primary btn-full">
                    <i class="fas fa-arrow-right-to-bracket"></i>
                    Se connecter
                </button>
                <div class="form-message" id="loginMessage"></div>
            </form>
        </div>
    </div>

    <!-- Modal d'√©v√©nement moderne -->
    <div class="modal" id="eventModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="eventModalTitle">Nouvel √©v√©nement</h3>
                <button class="modal-close" id="closeEventModal">
                    <i class="fas fa-xmark"></i>
                </button>
            </div>
            <form id="eventForm" class="event-form">
                <div class="form-group">
                    <label for="eventTitle">Titre de l'√©v√©nement</label>
                    <input type="text" id="eventTitle" name="titre" placeholder="Nom de votre √©v√©nement" required>
                </div>
                <div class="form-group">
                    <label for="eventDescription">Description</label>
                    <textarea id="eventDescription" name="description" rows="3" placeholder="D√©tails de l'√©v√©nement (optionnel)"></textarea>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="eventType">Type d'√©v√©nement</label>
                        <select id="eventType" name="type_evenement" required>
                            <option value="">S√©lectionner un type</option>
                            <option value="reunion">R√©union</option>
                            <option value="formation">Formation</option>
                            <option value="evenement">√âv√©nement</option>
                            <option value="conge">Cong√©</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="eventDate">Date et heure</label>
                        <input type="datetime-local" id="eventDate" name="date_debut" required>
                    </div>
                </div>
                <div class="form-group">
                    <label for="eventLocation">Lieu (optionnel)</label>
                    <input type="text" id="eventLocation" name="lieu" placeholder="Salle de r√©union, Teams, etc.">
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" id="cancelEvent">Annuler</button>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-calendar-plus"></i>
                        Cr√©er l'√©v√©nement
                    </button>
                </div>
                <div class="form-message" id="eventMessage"></div>
            </form>
        </div>
    </div>

    <!-- Toast de notification moderne -->
    <div class="toast" id="toast">
        <div class="toast-content">
            <i class="toast-icon"></i>
            <span class="toast-message"></span>
        </div>
    </div>

 <!-- Scripts JavaScript avec version anti-cache -->
<script src="frontend/js/api-supabase.js?v=2024110501"></script>
<script src="frontend/js/auth-supabase.js?v=2024110501"></script>
<script src="frontend/js/ui-supabase.js?v=2024110501"></script>
<script src="frontend/js/employees-supabase.js?v=2024110502"></script>
<script src="frontend/js/events-supabase.js?v=2024110501"></script>
<script src="frontend/js/main-supabase.js?v=2024110501"></script>
</body>
</html>
